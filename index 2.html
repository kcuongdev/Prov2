
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>B·ªô ƒë·ªÅ To√°n L·ªõp 4, L·ªõp 5 & IQ (30 ph√∫t)</title>
  <style>
    :root{--bg:#0f172a;--fg:#e2e8f0;--muted:#94a3b8;--accent:#22c55e;--accent-2:#38bdf8;--danger:#ef4444;--card:#111827;--card-2:#1f2937;--shadow:rgba(0,0,0,.35)}
    *{box-sizing:border-box} body{margin:0;background:radial-gradient(1000px 600px at 0% 0%, rgba(56,189,248,.12), transparent 50%), radial-gradient(1000px 600px at 100% 100%, rgba(34,197,94,.12), transparent 50%), var(--bg);color:var(--fg);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    header{position:sticky;top:0;background:linear-gradient(90deg, rgba(56,189,248,.15), rgba(34,197,94,.15));border-bottom:1px solid rgba(255,255,255,.08);backdrop-filter:blur(8px);z-index:40}
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    .brand{display:flex;align-items:center;gap:12px} .logo{width:36px;height:36px;border-radius:10px;background:conic-gradient(from 90deg, var(--accent), var(--accent-2))}
    .tagline{font-size:13px;color:var(--muted)}
    .card{background:linear-gradient(180deg,var(--card),var(--card-2));border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:20px;box-shadow:0 10px 30px var(--shadow)}
    .grid{display:grid;gap:16px} @media(min-width:900px){.grid.cols-2{grid-template-columns:1fr 1fr} .grid.cols-3{grid-template-columns:1fr 1fr 1fr}}
    .btn{appearance:none;border:0;border-radius:12px;padding:12px 16px;font-weight:800;letter-spacing:.3px;cursor:pointer;color:#04140a;background:linear-gradient(90deg,var(--accent),#a7f3d0);box-shadow:0 10px 22px rgba(34,197,94,.25)}
    .btn.secondary{color:#071318;background:linear-gradient(90deg,var(--accent-2),#bae6fd)}
    .btn.ghost{background:transparent;color:var(--fg);border:1px dashed rgba(255,255,255,.18)}
    input,.opt{background:#0b1220;border:1px solid rgba(255,255,255,.08);color:var(--fg);padding:12px;border-radius:12px;width:100%}
    .row{display:flex;gap:12px;align-items:center} .row.end{justify-content:flex-end}
    .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:#0b1220;border:1px solid rgba(255,255,255,.1);font-size:12px;color:var(--muted)}
    .q-card{border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px;background:#0c1220;margin-bottom:10px}
    .q-title{font-weight:800;margin-bottom:10px}
    .options{display:grid;gap:8px;margin-top:8px} .opt{display:flex;gap:10px;align-items:center;cursor:pointer} .opt input{display:none} .opt.selected{outline:2px solid var(--accent);background:rgba(34,197,94,.08)}
    .timer{font-variant-numeric:tabular-nums;font-weight:900;background:linear-gradient(90deg,#fde68a,#fca5a5);color:#111;padding:8px 12px;border-radius:999px;border:1px solid rgba(0,0,0,.1)}
    .toast{position:fixed;right:20px;bottom:20px;background:#0b1220;border:1px solid rgba(255,255,255,.12);color:var(--fg);padding:12px 16px;border-radius:12px;box-shadow:0 10px 30px var(--shadow);display:none;z-index:50}
    .ribbon{display:flex;gap:10px;overflow:hidden;padding:12px;border-radius:14px;border:1px dashed rgba(255,255,255,.18);background:#0b1220}
    .tile{min-width:140px;text-align:center;padding:10px;border-radius:10px;background:linear-gradient(180deg,#0b1a2a,#0e2236);border:1px solid rgba(255,255,255,.08);font-weight:800}
    .sticky-footer{position:sticky;bottom:0;margin-top:16px;padding:12px;border-top:1px solid rgba(255,255,255,.08);background:linear-gradient(180deg,rgba(2,6,23,.7),rgba(2,6,23,1));border-radius:0 0 16px 16px}
    .danger-text{color:var(--danger);font-weight:800}
    .good-text{color:#22c55e;font-weight:800}
    .muted{color:var(--muted)}
    .locked{pointer-events:none;filter:grayscale(1) blur(1px);opacity:.7}
  </style>
</head>
<body>
  <header>
    <div class="wrap" style="display:flex;align-items:center;justify-content:space-between">
      <div class="brand">
        <div class="logo"></div>
        <div>
          <div style="font-weight:800">B·ªô ƒë·ªÅ To√°n L·ªõp 4 ‚Ä¢ L·ªõp 5 ‚Ä¢ IQ</div>
          <div class="tagline">T·∫•t c·∫£ b√†i thi: 30 ph√∫t ‚Ä¢ T·ª± ch·∫•m ‚Ä¢ G·ª≠i Telegram ‚Ä¢ Xem l·∫°i</div>
        </div>
      </div>
      <div class="row" id="userBox"></div>
    </div>
  </header>

  <main class="wrap" style="margin-top:20px">
    <section id="auth" class="card">
      <h2>ƒêƒÉng nh·∫≠p</h2>
      <p class="muted">Ch·ªâ c·∫ßn nh·∫≠p <b>H·ªç & T√™n</b>. M·∫≠t kh·∫©u ƒëi·ªÅn g√¨ c≈©ng ƒë∆∞·ª£c. T√†i kho·∫£n l∆∞u c·ª•c b·ªô.</p>
      <div class="grid cols-2">
        <div><label>H·ªç & T√™n</label><input id="fullName" placeholder="V√≠ d·ª•: Tr·∫ßn Gia Huy"/></div>
        <div><label>M·∫≠t kh·∫©u</label><input id="password" type="password" placeholder="Tu·ª≥ √Ω"/></div>
      </div>
      <div class="row end" style="margin-top:12px"><button class="btn" id="loginBtn">ƒêƒÉng nh·∫≠p</button></div>
    </section>

    <section id="home" class="card" style="display:none">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:16px">
        <div>
          <h2>Xin ch√†o, <span id="nameWelcome"></span> üëã</h2>
          <div class="muted">Ch·ªçn <b>ch·∫ø ƒë·ªô</b> b√™n d∆∞·ªõi. V·ªõi To√°n, b·∫•m <b>Random b√†i thi</b> ƒë·ªÉ b·ªëc m·ª©c (D·ªÖ/Trung b√¨nh/Kh√≥/Si√™u kh√≥) r·ªìi h·ªá th·ªëng ch·ªçn 1/5 ƒë·ªÅ c·ªßa m·ª©c ƒë√≥.</div>
        </div>
        <div class="row"><button class="btn ghost" id="logoutBtn">ƒêƒÉng xu·∫•t</button></div>
      </div>

      <div class="grid cols-3" style="margin-top:12px">
        <div class="q-card">
          <div class="q-title">To√°n L·ªõp 4</div>
          <div class="muted">8 TL + 2 TN kh√≥ ‚Ä¢ Th·ªùi gian: 30 ph√∫t</div>
          <div class="row end" style="margin-top:8px"><button class="btn" id="modeG4">V√†o</button></div>
        </div>
        <div class="q-card">
          <div class="q-title">To√°n L·ªõp 5</div>
          <div class="muted">C·∫•u tr√∫c nh∆∞ l·ªõp 4 ‚Ä¢ Th·ªùi gian: 30 ph√∫t</div>
          <div class="row end" style="margin-top:8px"><button class="btn" id="modeG5">V√†o</button></div>
        </div>
        <div class="q-card">
          <div class="q-title">B√†i ki·ªÉm tra IQ (20 c√¢u)</div>
          <div class="muted">Ch·ªâ tr·∫Øc nghi·ªám ‚Ä¢ 30 ph√∫t ‚Ä¢ Thang 200 IQ</div>
          <div class="row end" style="margin-top:8px"><button class="btn secondary" id="modeIQ">B·∫Øt ƒë·∫ßu</button></div>
        </div>
      </div>
    </section>

    <section id="exam" class="card" style="display:none">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:16px">
        <div>
          <h2 id="examHeader">L√†m b√†i ki·ªÉm tra</h2>
          <div class="muted" id="examMeta"></div>
        </div>
        <div class="row">
          <div class="timer">‚è∞ <span id="timeLeft">--:--</span></div>
          <button class="btn ghost" id="submitBtn">N·ªôp b√†i</button>
        </div>
      </div>
      <div class="sep" style="height:1px;background:rgba(255,255,255,.08);margin:12px 0"></div>
      <div id="questions"></div>
      <div class="sticky-footer row end">
        <div class="pill">Ch·ªâ khi n·ªôp b√†i/h·∫øt gi·ªù m·ªõi hi·ªÉn th·ªã ƒë√°p √°n & ƒëi·ªÉm.</div>
        <button class="btn" id="submitBtn2">N·ªôp b√†i</button>
      </div>
    </section>

    <section id="result" class="card" style="display:none">
      <h2>K·∫øt qu·∫£</h2>
      <div id="scoreLine" class="q-title"></div>
      <canvas id="sheetCanvas" style="max-width:100%;width:100%;border-radius:12px;border:1px solid rgba(255,255,255,.08)"></canvas>
      <div class="row end" style="margin-top:12px">
        <button class="btn" id="sendTeleBtn">G·ª≠i ·∫£nh qua Telegram</button>
        <button class="btn ghost" id="reviewBtn">Xem l·∫°i ƒë·ªÅ</button>
        <button class="btn" id="backHomeBtn">Trang ch√≠nh</button>
      </div>
      <div class="muted" id="teleStatus" style="margin-top:8px"></div>
    </section>

    <section id="review" class="card" style="display:none">
      <h2>Xem l·∫°i ƒë·ªÅ ƒë√£ l√†m</h2>
      <div id="reviewMeta" class="muted"></div>
      <div id="reviewBody" style="margin-top:12px"></div>
      <div class="row end" style="margin-top:12px">
        <button class="btn ghost" id="reviewBack">Quay l·∫°i k·∫øt qu·∫£</button>
      </div>
    </section>
  </main>

  <!-- Random modal for math modes -->
  <div class="toast" id="toast"></div>
  <div class="modal" id="spinModal" style="position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;padding:20px;z-index:60">
    <div class="panel card" style="max-width:700px;width:100%">
      <h3>Random b√†i thi</h3>
      <p class="muted">Nh·∫•n <b>Ch·∫•p nh·∫≠n quay</b> ƒë·ªÉ b·ªëc m·ª©c ƒë·ªô. Sau khi b·ªëc m·ª©c, h·ªá th·ªëng s·∫Ω ch·ªçn 1 ƒë·ªÅ c·ªë ƒë·ªãnh ng·∫´u nhi√™n thu·ªôc m·ª©c ƒë√≥.</p>
      <div class="ribbon" id="spinRibbon">
        <div class="tile">D·ªÑ</div><div class="tile">TRUNG B√åNH</div><div class="tile">KH√ì</div><div class="tile">SI√äU KH√ì</div>
      </div>
      <div class="row end" style="margin-top:12px">
        <button class="btn ghost" id="closeSpin">ƒê√≥ng</button>
        <button class="btn" id="acceptSpin">Ch·∫•p nh·∫≠n quay</button>
      </div>
      <div class="muted" id="spinBanner" style="margin-top:6px"></div>
    </div>
  </div>

  <script>
    const CONFIG = { token: "8004316784:AAGXwEjyEOTG2Xc7eQBcuv9oEgFbnvaKv3s", chatId: "5705746414" };
    const USER_KEY='suite_user_v3'; const LAST_SUB='suite_last_v3';
    let USER = JSON.parse(localStorage.getItem(USER_KEY) || 'null');
    const TIME_MIN = 30;
    const BANK_G4 = {"D·ªÑ": [{"setName": "D·ªÑ - ƒê·ªÅ 1", "items": [{"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 8 cm √ó 12 cm = ?", "correct": "96", "points": 1, "id": 1}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 53 qu·∫£. Nh·∫≠p th√™m 19 qu·∫£, b√°n 23 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "49", "points": 1, "id": 2}, {"type": "fr", "stem": "9 √ó 6 = ?", "correct": "54", "points": 1, "id": 3}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 16 cm √ó 7 cm = ?", "correct": "46", "points": 1, "id": 4}, {"type": "fr", "stem": "300 √∑ 4 = ?", "correct": "75", "points": 1, "id": 5}, {"type": "fr", "stem": "109 + 85 = ?", "correct": "194", "points": 1, "id": 6}, {"type": "fr", "stem": "T√¨m x: 3 √ó x = 15", "correct": "5", "points": 1, "id": 7}, {"type": "fr", "stem": "1/4 c·ªßa 140 = ?", "correct": "35", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (35 + 43) √ó 9 l√†?", "options": ["712", "667", "702", "692"], "correct": "702", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 54 cm v√† m·ªôt c·∫°nh 16 cm. Di·ªán t√≠ch l√†?", "options": ["192", "160", "176", "187"], "correct": "176", "points": 2, "id": 10}]}, {"setName": "D·ªÑ - ƒê·ªÅ 2", "items": [{"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 5 cm √ó 4 cm = ?", "correct": "20", "points": 1, "id": 1}, {"type": "fr", "stem": "T√¨m x: 2 √ó x = 96", "correct": "48", "points": 1, "id": 2}, {"type": "fr", "stem": "84 √∑ 6 = ?", "correct": "14", "points": 1, "id": 3}, {"type": "fr", "stem": "89 - 51 = ?", "correct": "38", "points": 1, "id": 4}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 12 cm √ó 11 cm = ?", "correct": "46", "points": 1, "id": 5}, {"type": "fr", "stem": "C√≥ 30 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 7 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "2", "points": 1, "id": 6}, {"type": "fr", "stem": "T√¨m x: x + 19 = 53", "correct": "34", "points": 1, "id": 7}, {"type": "fr", "stem": "44 + 67 = ?", "correct": "111", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 41 √ó 32 ‚àí 3 l√†?", "options": ["1314", "1304", "1350", "1309"], "correct": "1309", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 62 cm v√† m·ªôt c·∫°nh 14 cm. Di·ªán t√≠ch l√†?", "options": ["252", "255", "238", "224"], "correct": "238", "points": 2, "id": 10}]}, {"setName": "D·ªÑ - ƒê·ªÅ 3", "items": [{"type": "fr", "stem": "1/10 c·ªßa 110 = ?", "correct": "11", "points": 1, "id": 1}, {"type": "fr", "stem": "144 - 63 = ?", "correct": "81", "points": 1, "id": 2}, {"type": "fr", "stem": "C√≥ 75 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 7 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "5", "points": 1, "id": 3}, {"type": "fr", "stem": "12 √ó 4 = ?", "correct": "48", "points": 1, "id": 4}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 46 qu·∫£. Nh·∫≠p th√™m 9 qu·∫£, b√°n 6 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "49", "points": 1, "id": 5}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 10 cm √ó 14 cm = ?", "correct": "48", "points": 1, "id": 6}, {"type": "fr", "stem": "18 + 118 = ?", "correct": "136", "points": 1, "id": 7}, {"type": "fr", "stem": "T√¨m x: x + 154 = 266", "correct": "112", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (33 + 10) √ó 4 l√†?", "options": ["172", "139", "162", "182"], "correct": "172", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 26 cm v√† m·ªôt c·∫°nh 6 cm. Di·ªán t√≠ch l√†?", "options": ["36", "49", "42", "48"], "correct": "42", "points": 2, "id": 10}]}, {"setName": "D·ªÑ - ƒê·ªÅ 4", "items": [{"type": "fr", "stem": "3/5 c·ªßa 175 = ?", "correct": "105", "points": 1, "id": 1}, {"type": "fr", "stem": "193 - 170 = ?", "correct": "23", "points": 1, "id": 2}, {"type": "fr", "stem": "10 √ó 4 = ?", "correct": "40", "points": 1, "id": 3}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 24 qu·∫£. Nh·∫≠p th√™m 9 qu·∫£, b√°n 27 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "6", "points": 1, "id": 4}, {"type": "fr", "stem": "T√¨m x: x + 137 = 316", "correct": "179", "points": 1, "id": 5}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 11 cm √ó 8 cm = ?", "correct": "38", "points": 1, "id": 6}, {"type": "fr", "stem": "200 + 192 = ?", "correct": "392", "points": 1, "id": 7}, {"type": "fr", "stem": "165 √∑ 5 = ?", "correct": "33", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 47 √ó 49 ‚àí 8 l√†?", "options": ["2342", "2300", "2295", "2290"], "correct": "2295", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 34 cm v√† m·ªôt c·∫°nh 9 cm. Di·ªán t√≠ch l√†?", "options": ["72", "63", "81", "80"], "correct": "72", "points": 2, "id": 10}]}, {"setName": "D·ªÑ - ƒê·ªÅ 5", "items": [{"type": "fr", "stem": "2/5 c·ªßa 80 = ?", "correct": "32", "points": 1, "id": 1}, {"type": "fr", "stem": "T√¨m x: x + 155 = 295", "correct": "140", "points": 1, "id": 2}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 12 cm √ó 17 cm = ?", "correct": "204", "points": 1, "id": 3}, {"type": "fr", "stem": "280 √∑ 8 = ?", "correct": "35", "points": 1, "id": 4}, {"type": "fr", "stem": "T√¨m x: 6 √ó x = 570", "correct": "95", "points": 1, "id": 5}, {"type": "fr", "stem": "179 - 126 = ?", "correct": "53", "points": 1, "id": 6}, {"type": "fr", "stem": "C√≥ 25 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 8 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "1", "points": 1, "id": 7}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 27 qu·∫£. Nh·∫≠p th√™m 24 qu·∫£, b√°n 35 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "16", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (23 + 47) √ó 2 l√†?", "options": ["130", "140", "150", "117"], "correct": "140", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 26 cm v√† m·ªôt c·∫°nh 7 cm. Di·ªán t√≠ch l√†?", "options": ["42", "49", "35", "48"], "correct": "42", "points": 2, "id": 10}]}], "TRUNG B√åNH": [{"setName": "TRUNG B√åNH - ƒê·ªÅ 1", "items": [{"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 19 cm √ó 9 cm = ?", "correct": "171", "points": 1, "id": 1}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 21 cm √ó 17 cm = ?", "correct": "76", "points": 1, "id": 2}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 58 qu·∫£. Nh·∫≠p th√™m 39 qu·∫£, b√°n 62 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "35", "points": 1, "id": 3}, {"type": "fr", "stem": "928 - 546 = ?", "correct": "382", "points": 1, "id": 4}, {"type": "fr", "stem": "25 √ó 23 = ?", "correct": "575", "points": 1, "id": 5}, {"type": "fr", "stem": "3/10 c·ªßa 250 = ?", "correct": "75", "points": 1, "id": 6}, {"type": "fr", "stem": "502 + 733 = ?", "correct": "1235", "points": 1, "id": 7}, {"type": "fr", "stem": "1352 √∑ 8 = ?", "correct": "169", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (44 + 62) √ó 12 l√†?", "options": ["1282", "1262", "1228", "1272"], "correct": "1272", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 74 cm v√† m·ªôt c·∫°nh 10 cm. Di·ªán t√≠ch l√†?", "options": ["260", "270", "280", "297"], "correct": "270", "points": 2, "id": 10}]}, {"setName": "TRUNG B√åNH - ƒê·ªÅ 2", "items": [{"type": "fr", "stem": "1/4 c·ªßa 440 = ?", "correct": "110", "points": 1, "id": 1}, {"type": "fr", "stem": "1345 - 753 = ?", "correct": "592", "points": 1, "id": 2}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 20 cm √ó 33 cm = ?", "correct": "660", "points": 1, "id": 3}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 22 cm √ó 15 cm = ?", "correct": "74", "points": 1, "id": 4}, {"type": "fr", "stem": "847 √∑ 7 = ?", "correct": "121", "points": 1, "id": 5}, {"type": "fr", "stem": "43 √ó 15 = ?", "correct": "645", "points": 1, "id": 6}, {"type": "fr", "stem": "T√¨m x: 3 √ó x = 261", "correct": "87", "points": 1, "id": 7}, {"type": "fr", "stem": "C√≥ 122 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 10 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "2", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 35 √ó 24 ‚àí 11 l√†?", "options": ["864", "834", "829", "824"], "correct": "829", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 90 cm v√† m·ªôt c·∫°nh 27 cm. Di·ªán t√≠ch l√†?", "options": ["459", "486", "504", "513"], "correct": "486", "points": 2, "id": 10}]}, {"setName": "TRUNG B√åNH - ƒê·ªÅ 3", "items": [{"type": "fr", "stem": "4/10 c·ªßa 730 = ?", "correct": "292", "points": 1, "id": 1}, {"type": "fr", "stem": "T√¨m x: x + 313 = 583", "correct": "270", "points": 1, "id": 2}, {"type": "fr", "stem": "T√¨m x: 12 √ó x = 1584", "correct": "132", "points": 1, "id": 3}, {"type": "fr", "stem": "244 + 691 = ?", "correct": "935", "points": 1, "id": 4}, {"type": "fr", "stem": "1480 √∑ 10 = ?", "correct": "148", "points": 1, "id": 5}, {"type": "fr", "stem": "33 √ó 12 = ?", "correct": "396", "points": 1, "id": 6}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 116 qu·∫£. Nh·∫≠p th√™m 64 qu·∫£, b√°n 38 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "142", "points": 1, "id": 7}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 20 cm √ó 28 cm = ?", "correct": "560", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (30 + 42) √ó 18 l√†?", "options": ["1266", "1296", "1306", "1286"], "correct": "1296", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 98 cm v√† m·ªôt c·∫°nh 26 cm. Di·ªán t√≠ch l√†?", "options": ["572", "598", "624", "621"], "correct": "598", "points": 2, "id": 10}]}, {"setName": "TRUNG B√åNH - ƒê·ªÅ 4", "items": [{"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 129 qu·∫£. Nh·∫≠p th√™m 38 qu·∫£, b√°n 43 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "124", "points": 1, "id": 1}, {"type": "fr", "stem": "T√¨m x: x + 74 = 823", "correct": "749", "points": 1, "id": 2}, {"type": "fr", "stem": "350 - 333 = ?", "correct": "17", "points": 1, "id": 3}, {"type": "fr", "stem": "4/5 c·ªßa 555 = ?", "correct": "444", "points": 1, "id": 4}, {"type": "fr", "stem": "19 √ó 25 = ?", "correct": "475", "points": 1, "id": 5}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 24 cm √ó 10 cm = ?", "correct": "68", "points": 1, "id": 6}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 13 cm √ó 35 cm = ?", "correct": "455", "points": 1, "id": 7}, {"type": "fr", "stem": "482 + 388 = ?", "correct": "870", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 61 √ó 41 ‚àí 7 l√†?", "options": ["2489", "2494", "2499", "2555"], "correct": "2494", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 88 cm v√† m·ªôt c·∫°nh 35 cm. Di·ªán t√≠ch l√†?", "options": ["280", "315", "350", "324"], "correct": "315", "points": 2, "id": 10}]}, {"setName": "TRUNG B√åNH - ƒê·ªÅ 5", "items": [{"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 109 qu·∫£. Nh·∫≠p th√™m 64 qu·∫£, b√°n 88 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "85", "points": 1, "id": 1}, {"type": "fr", "stem": "655 + 1065 = ?", "correct": "1720", "points": 1, "id": 2}, {"type": "fr", "stem": "936 √∑ 9 = ?", "correct": "104", "points": 1, "id": 3}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 30 cm √ó 23 cm = ?", "correct": "690", "points": 1, "id": 4}, {"type": "fr", "stem": "3/4 c·ªßa 160 = ?", "correct": "120", "points": 1, "id": 5}, {"type": "fr", "stem": "36 √ó 15 = ?", "correct": "540", "points": 1, "id": 6}, {"type": "fr", "stem": "450 - 312 = ?", "correct": "138", "points": 1, "id": 7}, {"type": "fr", "stem": "T√¨m x: 3 √ó x = 507", "correct": "169", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (61 + 44) √ó 14 l√†?", "options": ["1460", "1480", "1470", "1409"], "correct": "1470", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 108 cm v√† m·ªôt c·∫°nh 30 cm. Di·ªán t√≠ch l√†?", "options": ["720", "690", "750", "744"], "correct": "720", "points": 2, "id": 10}]}], "KH√ì": [{"setName": "KH√ì - ƒê·ªÅ 1", "items": [{"type": "fr", "stem": "2/6 c·ªßa 1164 = ?", "correct": "388", "points": 1, "id": 1}, {"type": "fr", "stem": "1569 - 1414 = ?", "correct": "155", "points": 1, "id": 2}, {"type": "fr", "stem": "T√¨m x: 4 √ó x = 1536", "correct": "384", "points": 1, "id": 3}, {"type": "fr", "stem": "C√≥ 283 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 8 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "3", "points": 1, "id": 4}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 13 cm √ó 59 cm = ?", "correct": "144", "points": 1, "id": 5}, {"type": "fr", "stem": "10318 √∑ 14 = ?", "correct": "737", "points": 1, "id": 6}, {"type": "fr", "stem": "2788 + 1946 = ?", "correct": "4734", "points": 1, "id": 7}, {"type": "fr", "stem": "T√¨m x: x + 230 = 2010", "correct": "1780", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (54 + 39) √ó 12 l√†?", "options": ["1062", "1116", "1106", "1126"], "correct": "1116", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 88 cm v√† m·ªôt c·∫°nh 19 cm. Di·ªán t√≠ch l√†?", "options": ["475", "500", "494", "456"], "correct": "475", "points": 2, "id": 10}]}, {"setName": "KH√ì - ƒê·ªÅ 2", "items": [{"type": "fr", "stem": "4/4 c·ªßa 1900 = ?", "correct": "1900", "points": 1, "id": 1}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 38 cm √ó 28 cm = ?", "correct": "1064", "points": 1, "id": 2}, {"type": "fr", "stem": "2636 √∑ 4 = ?", "correct": "659", "points": 1, "id": 3}, {"type": "fr", "stem": "4854 + 4579 = ?", "correct": "9433", "points": 1, "id": 4}, {"type": "fr", "stem": "1875 - 1708 = ?", "correct": "167", "points": 1, "id": 5}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 295 qu·∫£. Nh·∫≠p th√™m 151 qu·∫£, b√°n 48 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "398", "points": 1, "id": 6}, {"type": "fr", "stem": "T√¨m x: x + 629 = 2120", "correct": "1491", "points": 1, "id": 7}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 58 cm √ó 19 cm = ?", "correct": "154", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 53 √ó 62 ‚àí 28 l√†?", "options": ["3258", "3263", "3311", "3253"], "correct": "3258", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 202 cm v√† m·ªôt c·∫°nh 41 cm. Di·ªán t√≠ch l√†?", "options": ["2501", "2460", "2520", "2419"], "correct": "2460", "points": 2, "id": 10}]}, {"setName": "KH√ì - ƒê·ªÅ 3", "items": [{"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 118 qu·∫£. Nh·∫≠p th√™m 97 qu·∫£, b√°n 120 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "95", "points": 1, "id": 1}, {"type": "fr", "stem": "T√¨m x: x + 378 = 1132", "correct": "754", "points": 1, "id": 2}, {"type": "fr", "stem": "77 √ó 22 = ?", "correct": "1694", "points": 1, "id": 3}, {"type": "fr", "stem": "2624 + 3827 = ?", "correct": "6451", "points": 1, "id": 4}, {"type": "fr", "stem": "4587 √∑ 11 = ?", "correct": "417", "points": 1, "id": 5}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 56 cm √ó 45 cm = ?", "correct": "2520", "points": 1, "id": 6}, {"type": "fr", "stem": "2925 - 1092 = ?", "correct": "1833", "points": 1, "id": 7}, {"type": "fr", "stem": "T√¨m x: 8 √ó x = 2496", "correct": "312", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (97 + 32) √ó 19 l√†?", "options": ["2451", "2461", "2441", "2354"], "correct": "2451", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 144 cm v√† m·ªôt c·∫°nh 58 cm. Di·ªán t√≠ch l√†?", "options": ["826", "812", "754", "870"], "correct": "812", "points": 2, "id": 10}]}, {"setName": "KH√ì - ƒê·ªÅ 4", "items": [{"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 358 qu·∫£. Nh·∫≠p th√™m 164 qu·∫£, b√°n 45 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "477", "points": 1, "id": 1}, {"type": "fr", "stem": "3731 + 1464 = ?", "correct": "5195", "points": 1, "id": 2}, {"type": "fr", "stem": "C√≥ 341 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 5 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "1", "points": 1, "id": 3}, {"type": "fr", "stem": "T√¨m x: 9 √ó x = 2061", "correct": "229", "points": 1, "id": 4}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 37 cm √ó 46 cm = ?", "correct": "166", "points": 1, "id": 5}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 55 cm √ó 18 cm = ?", "correct": "990", "points": 1, "id": 6}, {"type": "fr", "stem": "3704 √∑ 8 = ?", "correct": "463", "points": 1, "id": 7}, {"type": "fr", "stem": "2/4 c·ªßa 1860 = ?", "correct": "930", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 120 √ó 64 ‚àí 23 l√†?", "options": ["7657", "7777", "7652", "7662"], "correct": "7657", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 186 cm v√† m·ªôt c·∫°nh 50 cm. Di·ªán t√≠ch l√†?", "options": ["2150", "2200", "2193", "2100"], "correct": "2150", "points": 2, "id": 10}]}, {"setName": "KH√ì - ƒê·ªÅ 5", "items": [{"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 297 qu·∫£. Nh·∫≠p th√™m 71 qu·∫£, b√°n 157 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "211", "points": 1, "id": 1}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 23 cm √ó 59 cm = ?", "correct": "1357", "points": 1, "id": 2}, {"type": "fr", "stem": "C√≥ 215 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 10 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "5", "points": 1, "id": 3}, {"type": "fr", "stem": "2009 + 1773 = ?", "correct": "3782", "points": 1, "id": 4}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 51 cm √ó 30 cm = ?", "correct": "162", "points": 1, "id": 5}, {"type": "fr", "stem": "72 √ó 48 = ?", "correct": "3456", "points": 1, "id": 6}, {"type": "fr", "stem": "2/6 c·ªßa 480 = ?", "correct": "160", "points": 1, "id": 7}, {"type": "fr", "stem": "5115 - 4288 = ?", "correct": "827", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (76 + 32) √ó 29 l√†?", "options": ["3056", "3122", "3142", "3132"], "correct": "3132", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 122 cm v√† m·ªôt c·∫°nh 34 cm. Di·ªán t√≠ch l√†?", "options": ["945", "918", "884", "952"], "correct": "918", "points": 2, "id": 10}]}], "SI√äU KH√ì": [{"setName": "SI√äU KH√ì - ƒê·ªÅ 1", "items": [{"type": "fr", "stem": "1/6 c·ªßa 3990 = ?", "correct": "665", "points": 1, "id": 1}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 698 qu·∫£. Nh·∫≠p th√™m 79 qu·∫£, b√°n 300 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "477", "points": 1, "id": 2}, {"type": "fr", "stem": "T√¨m x: x + 1365 = 2363", "correct": "998", "points": 1, "id": 3}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 35 cm √ó 76 cm = ?", "correct": "222", "points": 1, "id": 4}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 44 cm √ó 23 cm = ?", "correct": "1012", "points": 1, "id": 5}, {"type": "fr", "stem": "8898 + 4739 = ?", "correct": "13637", "points": 1, "id": 6}, {"type": "fr", "stem": "141 √ó 21 = ?", "correct": "2961", "points": 1, "id": 7}, {"type": "fr", "stem": "T√¨m x: 19 √ó x = 9424", "correct": "496", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (107 + 157) √ó 27 l√†?", "options": ["7138", "7021", "7128", "7118"], "correct": "7128", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 228 cm v√† m·ªôt c·∫°nh 43 cm. Di·ªán t√≠ch l√†?", "options": ["3096", "3010", "3124", "3053"], "correct": "3053", "points": 2, "id": 10}]}, {"setName": "SI√äU KH√ì - ƒê·ªÅ 2", "items": [{"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 399 qu·∫£. Nh·∫≠p th√™m 159 qu·∫£, b√°n 230 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "328", "points": 1, "id": 1}, {"type": "fr", "stem": "T√¨m x: x + 1033 = 3154", "correct": "2121", "points": 1, "id": 2}, {"type": "fr", "stem": "C√≥ 305 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 13 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "6", "points": 1, "id": 3}, {"type": "fr", "stem": "T√¨m x: 7 √ó x = 2828", "correct": "404", "points": 1, "id": 4}, {"type": "fr", "stem": "7385 + 2428 = ?", "correct": "9813", "points": 1, "id": 5}, {"type": "fr", "stem": "14625 √∑ 13 = ?", "correct": "1125", "points": 1, "id": 6}, {"type": "fr", "stem": "3/10 c·ªßa 920 = ?", "correct": "276", "points": 1, "id": 7}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 65 cm √ó 25 cm = ?", "correct": "180", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 167 √ó 85 ‚àí 25 l√†?", "options": ["14165", "14175", "14337", "14170"], "correct": "14170", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 298 cm v√† m·ªôt c·∫°nh 86 cm. Di·ªán t√≠ch l√†?", "options": ["5504", "5418", "5332", "5481"], "correct": "5418", "points": 2, "id": 10}]}, {"setName": "SI√äU KH√ì - ƒê·ªÅ 3", "items": [{"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 278 qu·∫£. Nh·∫≠p th√™m 260 qu·∫£, b√°n 107 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "431", "points": 1, "id": 1}, {"type": "fr", "stem": "8557 + 4885 = ?", "correct": "13442", "points": 1, "id": 2}, {"type": "fr", "stem": "2/6 c·ªßa 3858 = ?", "correct": "1286", "points": 1, "id": 3}, {"type": "fr", "stem": "C√≥ 444 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 14 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "10", "points": 1, "id": 4}, {"type": "fr", "stem": "11959 - 11757 = ?", "correct": "202", "points": 1, "id": 5}, {"type": "fr", "stem": "T√¨m x: 17 √ó x = 6273", "correct": "369", "points": 1, "id": 6}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 25 cm √ó 57 cm = ?", "correct": "164", "points": 1, "id": 7}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 68 cm √ó 20 cm = ?", "correct": "1360", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (144 + 153) √ó 20 l√†?", "options": ["5796", "5940", "5930", "5950"], "correct": "5940", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 184 cm v√† m·ªôt c·∫°nh 49 cm. Di·ªán t√≠ch l√†?", "options": ["2150", "2107", "2058", "2156"], "correct": "2107", "points": 2, "id": 10}]}, {"setName": "SI√äU KH√ì - ƒê·ªÅ 4", "items": [{"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 758 qu·∫£. Nh·∫≠p th√™m 119 qu·∫£, b√°n 285 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "592", "points": 1, "id": 1}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 50 cm √ó 34 cm = ?", "correct": "1700", "points": 1, "id": 2}, {"type": "fr", "stem": "T√¨m x: 11 √ó x = 2893", "correct": "263", "points": 1, "id": 3}, {"type": "fr", "stem": "9342 - 4230 = ?", "correct": "5112", "points": 1, "id": 4}, {"type": "fr", "stem": "176 √ó 38 = ?", "correct": "6688", "points": 1, "id": 5}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 77 cm √ó 27 cm = ?", "correct": "208", "points": 1, "id": 6}, {"type": "fr", "stem": "19188 √∑ 18 = ?", "correct": "1066", "points": 1, "id": 7}, {"type": "fr", "stem": "6636 + 7713 = ?", "correct": "14349", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 105 √ó 76 ‚àí 38 l√†?", "options": ["7937", "7942", "7947", "8047"], "correct": "7942", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 280 cm v√† m·ªôt c·∫°nh 67 cm. Di·ªán t√≠ch l√†?", "options": ["4824", "4958", "4891", "4964"], "correct": "4891", "points": 2, "id": 10}]}, {"setName": "SI√äU KH√ì - ƒê·ªÅ 5", "items": [{"type": "fr", "stem": "C√≥ 636 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 19 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "9", "points": 1, "id": 1}, {"type": "fr", "stem": "T√¨m x: x + 1496 = 3436", "correct": "1940", "points": 1, "id": 2}, {"type": "fr", "stem": "5608 + 3093 = ?", "correct": "8701", "points": 1, "id": 3}, {"type": "fr", "stem": "6103 - 5156 = ?", "correct": "947", "points": 1, "id": 4}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 68 cm √ó 47 cm = ?", "correct": "3196", "points": 1, "id": 5}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 80 cm √ó 72 cm = ?", "correct": "304", "points": 1, "id": 6}, {"type": "fr", "stem": "T√¨m x: 12 √ó x = 4260", "correct": "355", "points": 1, "id": 7}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 685 qu·∫£. Nh·∫≠p th√™m 187 qu·∫£, b√°n 111 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "761", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (126 + 91) √ó 17 l√†?", "options": ["3679", "3699", "3563", "3689"], "correct": "3689", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 130 cm v√† m·ªôt c·∫°nh 19 cm. Di·ªán t√≠ch l√†?", "options": ["855", "920", "893", "874"], "correct": "874", "points": 2, "id": 10}]}]};
    const BANK_G5 = {"D·ªÑ": [{"setName": "D·ªÑ - ƒê·ªÅ 1", "items": [{"type": "fr", "stem": "218 + 405 = ?", "correct": "623", "points": 1, "id": 1}, {"type": "fr", "stem": "C√≥ 56 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 5 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "1", "points": 1, "id": 2}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 13 cm √ó 23 cm = ?", "correct": "72", "points": 1, "id": 3}, {"type": "fr", "stem": "T√¨m x: x + 24 = 319", "correct": "295", "points": 1, "id": 4}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 21 cm √ó 15 cm = ?", "correct": "315", "points": 1, "id": 5}, {"type": "fr", "stem": "378 √∑ 6 = ?", "correct": "63", "points": 1, "id": 6}, {"type": "fr", "stem": "23 √ó 5 = ?", "correct": "115", "points": 1, "id": 7}, {"type": "fr", "stem": "T√¨m x: 8 √ó x = 152", "correct": "19", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (58 + 53) √ó 5 l√†?", "options": ["545", "497", "565", "555"], "correct": "555", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 36 cm v√† m·ªôt c·∫°nh 6 cm. Di·ªán t√≠ch l√†?", "options": ["84", "66", "78", "72"], "correct": "72", "points": 2, "id": 10}]}, {"setName": "D·ªÑ - ƒê·ªÅ 2", "items": [{"type": "fr", "stem": "769 - 589 = ?", "correct": "180", "points": 1, "id": 1}, {"type": "fr", "stem": "T√¨m x: 11 √ó x = 1254", "correct": "114", "points": 1, "id": 2}, {"type": "fr", "stem": "T√¨m x: x + 70 = 209", "correct": "139", "points": 1, "id": 3}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 24 cm √ó 22 cm = ?", "correct": "92", "points": 1, "id": 4}, {"type": "fr", "stem": "306 √∑ 3 = ?", "correct": "102", "points": 1, "id": 5}, {"type": "fr", "stem": "C√≥ 80 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 5 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "0", "points": 1, "id": 6}, {"type": "fr", "stem": "1/8 c·ªßa 80 = ?", "correct": "10", "points": 1, "id": 7}, {"type": "fr", "stem": "207 + 575 = ?", "correct": "782", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 60 √ó 30 ‚àí 4 l√†?", "options": ["1856", "1796", "1801", "1791"], "correct": "1796", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 76 cm v√† m·ªôt c·∫°nh 17 cm. Di·ªán t√≠ch l√†?", "options": ["378", "340", "357", "374"], "correct": "357", "points": 2, "id": 10}]}, {"setName": "D·ªÑ - ƒê·ªÅ 3", "items": [{"type": "fr", "stem": "617 - 209 = ?", "correct": "408", "points": 1, "id": 1}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 12 cm √ó 9 cm = ?", "correct": "42", "points": 1, "id": 2}, {"type": "fr", "stem": "C√≥ 55 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 4 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "3", "points": 1, "id": 3}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 24 cm √ó 10 cm = ?", "correct": "240", "points": 1, "id": 4}, {"type": "fr", "stem": "15 √ó 8 = ?", "correct": "120", "points": 1, "id": 5}, {"type": "fr", "stem": "568 √∑ 8 = ?", "correct": "71", "points": 1, "id": 6}, {"type": "fr", "stem": "1/12 c·ªßa 300 = ?", "correct": "25", "points": 1, "id": 7}, {"type": "fr", "stem": "616 + 823 = ?", "correct": "1439", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (41 + 21) √ó 9 l√†?", "options": ["548", "517", "568", "558"], "correct": "558", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 62 cm v√† m·ªôt c·∫°nh 23 cm. Di·ªán t√≠ch l√†?", "options": ["207", "192", "161", "184"], "correct": "184", "points": 2, "id": 10}]}, {"setName": "D·ªÑ - ƒê·ªÅ 4", "items": [{"type": "fr", "stem": "466 - 322 = ?", "correct": "144", "points": 1, "id": 1}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 10 cm √ó 22 cm = ?", "correct": "220", "points": 1, "id": 2}, {"type": "fr", "stem": "C√≥ 119 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 10 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "9", "points": 1, "id": 3}, {"type": "fr", "stem": "4/3 c·ªßa 231 = ?", "correct": "308", "points": 1, "id": 4}, {"type": "fr", "stem": "292 + 532 = ?", "correct": "824", "points": 1, "id": 5}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 78 qu·∫£. Nh·∫≠p th√™m 34 qu·∫£, b√°n 51 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "61", "points": 1, "id": 6}, {"type": "fr", "stem": "528 √∑ 6 = ?", "correct": "88", "points": 1, "id": 7}, {"type": "fr", "stem": "T√¨m x: x + 47 = 247", "correct": "200", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 51 √ó 41 ‚àí 3 l√†?", "options": ["2083", "2088", "2093", "2139"], "correct": "2088", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 56 cm v√† m·ªôt c·∫°nh 8 cm. Di·ªán t√≠ch l√†?", "options": ["152", "160", "180", "168"], "correct": "160", "points": 2, "id": 10}]}, {"setName": "D·ªÑ - ƒê·ªÅ 5", "items": [{"type": "fr", "stem": "11 √ó 12 = ?", "correct": "132", "points": 1, "id": 1}, {"type": "fr", "stem": "642 √∑ 6 = ?", "correct": "107", "points": 1, "id": 2}, {"type": "fr", "stem": "2/10 c·ªßa 130 = ?", "correct": "26", "points": 1, "id": 3}, {"type": "fr", "stem": "296 + 705 = ?", "correct": "1001", "points": 1, "id": 4}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 23 cm √ó 12 cm = ?", "correct": "276", "points": 1, "id": 5}, {"type": "fr", "stem": "T√¨m x: x + 133 = 312", "correct": "179", "points": 1, "id": 6}, {"type": "fr", "stem": "T√¨m x: 10 √ó x = 1010", "correct": "101", "points": 1, "id": 7}, {"type": "fr", "stem": "584 - 398 = ?", "correct": "186", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (29 + 34) √ó 10 l√†?", "options": ["630", "601", "620", "640"], "correct": "630", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 86 cm v√† m·ªôt c·∫°nh 21 cm. Di·ªán t√≠ch l√†?", "options": ["484", "441", "462", "483"], "correct": "462", "points": 2, "id": 10}]}], "TRUNG B√åNH": [{"setName": "TRUNG B√åNH - ƒê·ªÅ 1", "items": [{"type": "fr", "stem": "741 - 684 = ?", "correct": "57", "points": 1, "id": 1}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 39 cm √ó 11 cm = ?", "correct": "100", "points": 1, "id": 2}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 10 cm √ó 34 cm = ?", "correct": "340", "points": 1, "id": 3}, {"type": "fr", "stem": "2/5 c·ªßa 1110 = ?", "correct": "444", "points": 1, "id": 4}, {"type": "fr", "stem": "39 √ó 19 = ?", "correct": "741", "points": 1, "id": 5}, {"type": "fr", "stem": "C√≥ 150 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 14 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "10", "points": 1, "id": 6}, {"type": "fr", "stem": "495 √∑ 15 = ?", "correct": "33", "points": 1, "id": 7}, {"type": "fr", "stem": "T√¨m x: x + 371 = 1465", "correct": "1094", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (63 + 91) √ó 10 l√†?", "options": ["1477", "1540", "1550", "1530"], "correct": "1540", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 76 cm v√† m·ªôt c·∫°nh 24 cm. Di·ªán t√≠ch l√†?", "options": ["360", "350", "336", "312"], "correct": "336", "points": 2, "id": 10}]}, {"setName": "TRUNG B√åNH - ƒê·ªÅ 2", "items": [{"type": "fr", "stem": "2738 - 903 = ?", "correct": "1835", "points": 1, "id": 1}, {"type": "fr", "stem": "42 √ó 22 = ?", "correct": "924", "points": 1, "id": 2}, {"type": "fr", "stem": "T√¨m x: 4 √ó x = 876", "correct": "219", "points": 1, "id": 3}, {"type": "fr", "stem": "882 √∑ 7 = ?", "correct": "126", "points": 1, "id": 4}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 30 cm √ó 30 cm = ?", "correct": "900", "points": 1, "id": 5}, {"type": "fr", "stem": "T√¨m x: x + 399 = 1011", "correct": "612", "points": 1, "id": 6}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 17 cm √ó 19 cm = ?", "correct": "72", "points": 1, "id": 7}, {"type": "fr", "stem": "C√≥ 124 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 7 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "5", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 32 √ó 52 ‚àí 6 l√†?", "options": ["1690", "1658", "1663", "1653"], "correct": "1658", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 104 cm v√† m·ªôt c·∫°nh 33 cm. Di·ªán t√≠ch l√†?", "options": ["646", "660", "627", "594"], "correct": "627", "points": 2, "id": 10}]}, {"setName": "TRUNG B√åNH - ƒê·ªÅ 3", "items": [{"type": "fr", "stem": "2233 - 1535 = ?", "correct": "698", "points": 1, "id": 1}, {"type": "fr", "stem": "2/4 c·ªßa 260 = ?", "correct": "130", "points": 1, "id": 2}, {"type": "fr", "stem": "T√¨m x: 7 √ó x = 1617", "correct": "231", "points": 1, "id": 3}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 270 qu·∫£. Nh·∫≠p th√™m 128 qu·∫£, b√°n 144 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "254", "points": 1, "id": 4}, {"type": "fr", "stem": "C√≥ 135 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 4 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "3", "points": 1, "id": 5}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 35 cm √ó 19 cm = ?", "correct": "665", "points": 1, "id": 6}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 29 cm √ó 19 cm = ?", "correct": "96", "points": 1, "id": 7}, {"type": "fr", "stem": "1925 + 2670 = ?", "correct": "4595", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (72 + 47) √ó 14 l√†?", "options": ["1676", "1656", "1666", "1594"], "correct": "1666", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 88 cm v√† m·ªôt c·∫°nh 23 cm. Di·ªán t√≠ch l√†?", "options": ["460", "506", "504", "483"], "correct": "483", "points": 2, "id": 10}]}, {"setName": "TRUNG B√åNH - ƒê·ªÅ 4", "items": [{"type": "fr", "stem": "37 √ó 10 = ?", "correct": "370", "points": 1, "id": 1}, {"type": "fr", "stem": "T√¨m x: x + 273 = 1355", "correct": "1082", "points": 1, "id": 2}, {"type": "fr", "stem": "2008 - 1766 = ?", "correct": "242", "points": 1, "id": 3}, {"type": "fr", "stem": "T√¨m x: 5 √ó x = 505", "correct": "101", "points": 1, "id": 4}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 15 cm √ó 39 cm = ?", "correct": "585", "points": 1, "id": 5}, {"type": "fr", "stem": "1397 + 1471 = ?", "correct": "2868", "points": 1, "id": 6}, {"type": "fr", "stem": "456 √∑ 12 = ?", "correct": "38", "points": 1, "id": 7}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 100 qu·∫£. Nh·∫≠p th√™m 30 qu·∫£, b√°n 59 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "71", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 39 √ó 39 ‚àí 13 l√†?", "options": ["1513", "1508", "1503", "1547"], "correct": "1508", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 94 cm v√† m·ªôt c·∫°nh 19 cm. Di·ªán t√≠ch l√†?", "options": ["551", "560", "532", "513"], "correct": "532", "points": 2, "id": 10}]}, {"setName": "TRUNG B√åNH - ƒê·ªÅ 5", "items": [{"type": "fr", "stem": "28 √ó 19 = ?", "correct": "532", "points": 1, "id": 1}, {"type": "fr", "stem": "C√≥ 166 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 5 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "1", "points": 1, "id": 2}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 183 qu·∫£. Nh·∫≠p th√™m 52 qu·∫£, b√°n 38 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "197", "points": 1, "id": 3}, {"type": "fr", "stem": "T√¨m x: x + 192 = 1011", "correct": "819", "points": 1, "id": 4}, {"type": "fr", "stem": "T√¨m x: 6 √ó x = 222", "correct": "37", "points": 1, "id": 5}, {"type": "fr", "stem": "516 √∑ 12 = ?", "correct": "43", "points": 1, "id": 6}, {"type": "fr", "stem": "1364 + 2588 = ?", "correct": "3952", "points": 1, "id": 7}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 21 cm √ó 18 cm = ?", "correct": "378", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (76 + 94) √ó 9 l√†?", "options": ["1540", "1530", "1454", "1520"], "correct": "1530", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 136 cm v√† m·ªôt c·∫°nh 39 cm. Di·ªán t√≠ch l√†?", "options": ["1160", "1131", "1170", "1092"], "correct": "1131", "points": 2, "id": 10}]}], "KH√ì": [{"setName": "KH√ì - ƒê·ªÅ 1", "items": [{"type": "fr", "stem": "4087 - 2872 = ?", "correct": "1215", "points": 1, "id": 1}, {"type": "fr", "stem": "8848 √∑ 16 = ?", "correct": "553", "points": 1, "id": 2}, {"type": "fr", "stem": "3/7 c·ªßa 2121 = ?", "correct": "909", "points": 1, "id": 3}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 31 cm √ó 15 cm = ?", "correct": "465", "points": 1, "id": 4}, {"type": "fr", "stem": "T√¨m x: x + 147 = 1534", "correct": "1387", "points": 1, "id": 5}, {"type": "fr", "stem": "T√¨m x: 13 √ó x = 1781", "correct": "137", "points": 1, "id": 6}, {"type": "fr", "stem": "C√≥ 241 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 7 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "3", "points": 1, "id": 7}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 52 cm √ó 42 cm = ?", "correct": "188", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (95 + 99) √ó 11 l√†?", "options": ["2134", "2124", "2144", "2039"], "correct": "2134", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 188 cm v√† m·ªôt c·∫°nh 59 cm. Di·ªán t√≠ch l√†?", "options": ["2006", "2124", "2065", "2100"], "correct": "2065", "points": 2, "id": 10}]}, {"setName": "KH√ì - ƒê·ªÅ 2", "items": [{"type": "fr", "stem": "11671 - 8472 = ?", "correct": "3199", "points": 1, "id": 1}, {"type": "fr", "stem": "C√≥ 209 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 10 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "9", "points": 1, "id": 2}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 35 cm √ó 12 cm = ?", "correct": "94", "points": 1, "id": 3}, {"type": "fr", "stem": "7105 + 7738 = ?", "correct": "14843", "points": 1, "id": 4}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 401 qu·∫£. Nh·∫≠p th√™m 155 qu·∫£, b√°n 112 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "444", "points": 1, "id": 5}, {"type": "fr", "stem": "94 √ó 50 = ?", "correct": "4700", "points": 1, "id": 6}, {"type": "fr", "stem": "T√¨m x: 6 √ó x = 876", "correct": "146", "points": 1, "id": 7}, {"type": "fr", "stem": "T√¨m x: x + 398 = 1047", "correct": "649", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 131 √ó 41 ‚àí 12 l√†?", "options": ["5364", "5490", "5354", "5359"], "correct": "5359", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 156 cm v√† m·ªôt c·∫°nh 52 cm. Di·ªán t√≠ch l√†?", "options": ["1300", "1404", "1352", "1378"], "correct": "1352", "points": 2, "id": 10}]}, {"setName": "KH√ì - ƒê·ªÅ 3", "items": [{"type": "fr", "stem": "101 √ó 22 = ?", "correct": "2222", "points": 1, "id": 1}, {"type": "fr", "stem": "T√¨m x: 17 √ó x = 6035", "correct": "355", "points": 1, "id": 2}, {"type": "fr", "stem": "T√¨m x: x + 392 = 1771", "correct": "1379", "points": 1, "id": 3}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 48 cm √ó 24 cm = ?", "correct": "1152", "points": 1, "id": 4}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 14 cm √ó 43 cm = ?", "correct": "114", "points": 1, "id": 5}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 302 qu·∫£. Nh·∫≠p th√™m 104 qu·∫£, b√°n 209 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "197", "points": 1, "id": 6}, {"type": "fr", "stem": "1/3 c·ªßa 1227 = ?", "correct": "409", "points": 1, "id": 7}, {"type": "fr", "stem": "1400 √∑ 10 = ?", "correct": "140", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (107 + 75) √ó 11 l√†?", "options": ["1992", "2012", "2002", "1895"], "correct": "2002", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 88 cm v√† m·ªôt c·∫°nh 15 cm. Di·ªán t√≠ch l√†?", "options": ["420", "435", "464", "450"], "correct": "435", "points": 2, "id": 10}]}, {"setName": "KH√ì - ƒê·ªÅ 4", "items": [{"type": "fr", "stem": "85 √ó 39 = ?", "correct": "3315", "points": 1, "id": 1}, {"type": "fr", "stem": "7522 - 4552 = ?", "correct": "2970", "points": 1, "id": 2}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 23 cm √ó 48 cm = ?", "correct": "1104", "points": 1, "id": 3}, {"type": "fr", "stem": "5565 √∑ 15 = ?", "correct": "371", "points": 1, "id": 4}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 218 qu·∫£. Nh·∫≠p th√™m 195 qu·∫£, b√°n 236 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "177", "points": 1, "id": 5}, {"type": "fr", "stem": "7835 + 3283 = ?", "correct": "11118", "points": 1, "id": 6}, {"type": "fr", "stem": "2/3 c·ªßa 705 = ?", "correct": "470", "points": 1, "id": 7}, {"type": "fr", "stem": "C√≥ 305 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 11 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "8", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 74 √ó 79 ‚àí 21 l√†?", "options": ["5825", "5899", "5830", "5820"], "correct": "5825", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 144 cm v√† m·ªôt c·∫°nh 27 cm. Di·ªán t√≠ch l√†?", "options": ["1188", "1260", "1215", "1242"], "correct": "1215", "points": 2, "id": 10}]}, {"setName": "KH√ì - ƒê·ªÅ 5", "items": [{"type": "fr", "stem": "6154 √∑ 17 = ?", "correct": "362", "points": 1, "id": 1}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 20 cm √ó 57 cm = ?", "correct": "1140", "points": 1, "id": 2}, {"type": "fr", "stem": "2597 + 2392 = ?", "correct": "4989", "points": 1, "id": 3}, {"type": "fr", "stem": "1/10 c·ªßa 570 = ?", "correct": "57", "points": 1, "id": 4}, {"type": "fr", "stem": "C√≥ 464 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 13 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "9", "points": 1, "id": 5}, {"type": "fr", "stem": "T√¨m x: x + 681 = 1577", "correct": "896", "points": 1, "id": 6}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 257 qu·∫£. Nh·∫≠p th√™m 130 qu·∫£, b√°n 51 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "336", "points": 1, "id": 7}, {"type": "fr", "stem": "43 √ó 34 = ?", "correct": "1462", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (75 + 108) √ó 12 l√†?", "options": ["2206", "2186", "2196", "2121"], "correct": "2196", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 66 cm v√† m·ªôt c·∫°nh 14 cm. Di·ªán t√≠ch l√†?", "options": ["252", "280", "266", "285"], "correct": "266", "points": 2, "id": 10}]}], "SI√äU KH√ì": [{"setName": "SI√äU KH√ì - ƒê·ªÅ 1", "items": [{"type": "fr", "stem": "8087 - 7177 = ?", "correct": "910", "points": 1, "id": 1}, {"type": "fr", "stem": "6570 + 10554 = ?", "correct": "17124", "points": 1, "id": 2}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 401 qu·∫£. Nh·∫≠p th√™m 227 qu·∫£, b√°n 144 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "484", "points": 1, "id": 3}, {"type": "fr", "stem": "3/7 c·ªßa 1421 = ?", "correct": "609", "points": 1, "id": 4}, {"type": "fr", "stem": "T√¨m x: x + 374 = 1290", "correct": "916", "points": 1, "id": 5}, {"type": "fr", "stem": "14724 √∑ 9 = ?", "correct": "1636", "points": 1, "id": 6}, {"type": "fr", "stem": "T√¨m x: 9 √ó x = 4410", "correct": "490", "points": 1, "id": 7}, {"type": "fr", "stem": "79 √ó 56 = ?", "correct": "4424", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (128 + 176) √ó 19 l√†?", "options": ["5776", "5766", "5786", "5648"], "correct": "5776", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 236 cm v√† m·ªôt c·∫°nh 53 cm. Di·ªán t√≠ch l√†?", "options": ["3445", "3498", "3392", "3510"], "correct": "3445", "points": 2, "id": 10}]}, {"setName": "SI√äU KH√ì - ƒê·ªÅ 2", "items": [{"type": "fr", "stem": "65 √ó 38 = ?", "correct": "2470", "points": 1, "id": 1}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 82 cm √ó 27 cm = ?", "correct": "218", "points": 1, "id": 2}, {"type": "fr", "stem": "Di·ªán t√≠ch h√¨nh ch·ªØ nh·∫≠t 25 cm √ó 83 cm = ?", "correct": "2075", "points": 1, "id": 3}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 316 qu·∫£. Nh·∫≠p th√™m 161 qu·∫£, b√°n 224 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "253", "points": 1, "id": 4}, {"type": "fr", "stem": "17710 √∑ 10 = ?", "correct": "1771", "points": 1, "id": 5}, {"type": "fr", "stem": "T√¨m x: 11 √ó x = 1133", "correct": "103", "points": 1, "id": 6}, {"type": "fr", "stem": "4/5 c·ªßa 1960 = ?", "correct": "1568", "points": 1, "id": 7}, {"type": "fr", "stem": "C√≥ 343 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 22 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "13", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 135 √ó 95 ‚àí 12 l√†?", "options": ["12948", "12808", "12818", "12813"], "correct": "12813", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 282 cm v√† m·ªôt c·∫°nh 76 cm. Di·ªán t√≠ch l√†?", "options": ["4864", "5005", "4940", "5016"], "correct": "4940", "points": 2, "id": 10}]}, {"setName": "SI√äU KH√ì - ƒê·ªÅ 3", "items": [{"type": "fr", "stem": "176 √ó 67 = ?", "correct": "11792", "points": 1, "id": 1}, {"type": "fr", "stem": "T√¨m x: 13 √ó x = 5213", "correct": "401", "points": 1, "id": 2}, {"type": "fr", "stem": "C√≥ 366 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 14 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "2", "points": 1, "id": 3}, {"type": "fr", "stem": "14460 - 7534 = ?", "correct": "6926", "points": 1, "id": 4}, {"type": "fr", "stem": "T√¨m x: x + 689 = 4316", "correct": "3627", "points": 1, "id": 5}, {"type": "fr", "stem": "5587 + 10048 = ?", "correct": "15635", "points": 1, "id": 6}, {"type": "fr", "stem": "4/7 c·ªßa 3633 = ?", "correct": "2076", "points": 1, "id": 7}, {"type": "fr", "stem": "5516 √∑ 14 = ?", "correct": "394", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (194 + 77) √ó 31 l√†?", "options": ["8401", "8207", "8411", "8391"], "correct": "8401", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 190 cm v√† m·ªôt c·∫°nh 60 cm. Di·ªán t√≠ch l√†?", "options": ["2135", "2160", "2040", "2100"], "correct": "2100", "points": 2, "id": 10}]}, {"setName": "SI√äU KH√ì - ƒê·ªÅ 4", "items": [{"type": "fr", "stem": "26020 √∑ 20 = ?", "correct": "1301", "points": 1, "id": 1}, {"type": "fr", "stem": "2/4 c·ªßa 1388 = ?", "correct": "694", "points": 1, "id": 2}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 629 qu·∫£. Nh·∫≠p th√™m 345 qu·∫£, b√°n 99 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "875", "points": 1, "id": 3}, {"type": "fr", "stem": "5305 - 5168 = ?", "correct": "137", "points": 1, "id": 4}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 40 cm √ó 90 cm = ?", "correct": "260", "points": 1, "id": 5}, {"type": "fr", "stem": "T√¨m x: x + 672 = 1740", "correct": "1068", "points": 1, "id": 6}, {"type": "fr", "stem": "C√≥ 896 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 13 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "12", "points": 1, "id": 7}, {"type": "fr", "stem": "140 √ó 55 = ?", "correct": "7700", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa 82 √ó 137 ‚àí 15 l√†?", "options": ["11219", "11214", "11224", "11301"], "correct": "11219", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 330 cm v√† m·ªôt c·∫°nh 88 cm. Di·ªán t√≠ch l√†?", "options": ["6853", "6864", "6776", "6688"], "correct": "6776", "points": 2, "id": 10}]}, {"setName": "SI√äU KH√ì - ƒê·ªÅ 5", "items": [{"type": "fr", "stem": "10087 √∑ 11 = ?", "correct": "917", "points": 1, "id": 1}, {"type": "fr", "stem": "T√¨m x: x + 1106 = 4556", "correct": "3450", "points": 1, "id": 2}, {"type": "fr", "stem": "14108 - 13449 = ?", "correct": "659", "points": 1, "id": 3}, {"type": "fr", "stem": "Chu vi h√¨nh ch·ªØ nh·∫≠t 27 cm √ó 60 cm = ?", "correct": "174", "points": 1, "id": 4}, {"type": "fr", "stem": "3/12 c·ªßa 4020 = ?", "correct": "1005", "points": 1, "id": 5}, {"type": "fr", "stem": "C·ª≠a h√†ng c√≥ 837 qu·∫£. Nh·∫≠p th√™m 84 qu·∫£, b√°n 189 qu·∫£. C√≤n l·∫°i bao nhi√™u qu·∫£?", "correct": "732", "points": 1, "id": 6}, {"type": "fr", "stem": "C√≥ 612 b·∫°n, chia ƒë·ªÅu m·ªói nh√≥m 13 b·∫°n. C√≤n d∆∞ m·∫•y b·∫°n?", "correct": "1", "points": 1, "id": 7}, {"type": "fr", "stem": "101 √ó 96 = ?", "correct": "9696", "points": 1, "id": 8}, {"type": "mcq", "stem": "Gi√° tr·ªã c·ªßa (153 + 178) √ó 35 l√†?", "options": ["11575", "11432", "11595", "11585"], "correct": "11585", "points": 2, "id": 9}, {"type": "mcq", "stem": "H√¨nh ch·ªØ nh·∫≠t c√≥ chu vi 252 cm v√† m·ªôt c·∫°nh 67 cm. Di·ªán t√≠ch l√†?", "options": ["4012", "3886", "3953", "4020"], "correct": "3953", "points": 2, "id": 10}]}]};
    const IQ_BANK = {"setName": "IQ-20", "items": [{"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 7, 17, 27, 37, 47, 57, ?", "options": ["87", "57", "67", "77"], "correct": "67", "points": 1, "id": 1}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 6, 10, 14, 18, 22, ?", "options": ["30", "26", "34", "22"], "correct": "26", "points": 1, "id": 2}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 4, 11, 18, 25, 32, 39, ?", "options": ["53", "39", "60", "46"], "correct": "46", "points": 1, "id": 3}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 4, 9, 14, 19, 24, 29, ?", "options": ["34", "39", "29", "44"], "correct": "34", "points": 1, "id": 4}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 8, 14, 20, 26, ?", "options": ["26", "32", "44", "38"], "correct": "32", "points": 1, "id": 5}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 9, 18, 27, ?", "options": ["45", "54", "27", "36"], "correct": "36", "points": 1, "id": 6}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 6, 15, 24, 33, ?", "options": ["42", "51", "60", "33"], "correct": "42", "points": 1, "id": 7}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 11, 14, 17, 20, 23, 26, ?", "options": ["32", "26", "35", "29"], "correct": "29", "points": 1, "id": 8}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 4, 12, 20, 28, 36, ?", "options": ["44", "36", "52", "60"], "correct": "44", "points": 1, "id": 9}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 8, 17, 26, 35, 44, 53, ?", "options": ["53", "71", "62", "80"], "correct": "62", "points": 1, "id": 10}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 9, 36, 144, 576, 2304, ?", "options": ["36864", "9220", "2304", "9216"], "correct": "9216", "points": 1, "id": 11}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 6, 30, 150, 750, ?", "options": ["3755", "3750", "18750", "750"], "correct": "3750", "points": 1, "id": 12}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 3, 15, 75, ?", "options": ["1875", "75", "375", "380"], "correct": "375", "points": 1, "id": 13}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 5, 15, 45, ?", "options": ["45", "138", "405", "135"], "correct": "135", "points": 1, "id": 14}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 5, 15, 45, 135, ?", "options": ["1215", "408", "405", "135"], "correct": "405", "points": 1, "id": 15}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 5, 6, 11, 17, 28, ?", "options": ["45", "47", "43", "50"], "correct": "45", "points": 1, "id": 16}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 9, 7, 16, 23, 39, ?", "options": ["67", "64", "62", "60"], "correct": "62", "points": 1, "id": 17}, {"type": "mcq", "stem": "ƒêi·ªÅn s·ªë ti·∫øp theo: 7, 6, 13, 19, 32, ?", "options": ["53", "49", "56", "51"], "correct": "51", "points": 1, "id": 18}, {"type": "mcq", "stem": "S·ªë 17 l√† ch·∫µn hay l·∫ª?", "options": ["Ch·∫µn", "L·∫ª", "Kh√¥ng x√°c ƒë·ªãnh", "S·ªë nguy√™n t·ªë"], "correct": "L·∫ª", "points": 1, "id": 19}, {"type": "mcq", "stem": "S·ªë 12 l√† ch·∫µn hay l·∫ª?", "options": ["Ch·∫µn", "L·∫ª", "Kh√¥ng x√°c ƒë·ªãnh", "S·ªë nguy√™n t·ªë"], "correct": "Ch·∫µn", "points": 1, "id": 20}]};
    let CURRENT_MODE = null;
    let EXAM=null, TIMER=null, END_AT=0, LOCKED=false, REVIEW=null;

    function $(s){return document.querySelector(s)}
    function toast(msg, dur=2500){ const t=$('#toast'); t.textContent=msg; t.style.display='block'; setTimeout(()=>t.style.display='none', dur) }
    function fmt(sec){const m=String(Math.floor(sec/60)).padStart(2,'0'); const s=String(sec%60).padStart(2,'0'); return m+':'+s}
    function renderUser(){
      const box=$('#userBox');
      if(!USER) { box.innerHTML='<div class="pill">Ch∆∞a ƒëƒÉng nh·∫≠p</div>'; return; }
      box.innerHTML = '<div class="pill">üë§ '+USER.fullName+'</div><div class="pill">‚è±Ô∏è 30 ph√∫t</div>';
    }

    function show(id){ ['auth','home','exam','result','review'].forEach(k=>document.getElementById(k).style.display='none'); document.getElementById(id).style.display='block'; }
    function onLogin(){ const fn=$('#fullName').value.trim(); if(!fn) return toast('Vui l√≤ng nh·∫≠p H·ªç & T√™n'); USER={fullName:fn, createdAt:Date.now()}; localStorage.setItem(USER_KEY, JSON.stringify(USER)); $('#nameWelcome').textContent = fn.split(' ').slice(-1)[0]||fn; renderUser(); show('home'); }
    function onLogout(){ localStorage.removeItem(USER_KEY); USER=null; renderUser(); show('auth'); }

    function pickSet(level, bank){ const sets=bank[level]; const idx=Math.floor(Math.random()*sets.length); return {...sets[idx], idx}; }
    function openSpin(){ $('#spinModal').style.display='flex'; $('#spinBanner').textContent=''; animateRibbon($('#spinRibbon')); }
    function closeSpin(){ $('#spinModal').style.display='none'; stopRibbon($('#spinRibbon')); }
    function animateRibbon(ribbon){ let x=0; ribbon._int=setInterval(()=>{ x-=20; ribbon.style.transform='translateX('+x+'px)'; if(Math.abs(x)>160) x=0; },60); }
    function stopRibbon(ribbon){ if(ribbon._int) clearInterval(ribbon._int); ribbon.style.transform='translateX(0)'; }

    function startMath(mode){
      CURRENT_MODE=mode; openSpin(); $('#spinBanner').textContent='ƒêang quay...';
      setTimeout(()=>{ stopRibbon($('#spinRibbon')); const levels=['D·ªÑ','TRUNG B√åNH','KH√ì','SI√äU KH√ì']; const lv=levels[Math.floor(Math.random()*levels.length)]; $('#spinBanner').innerHTML='B·ªëc m·ª©c: <b>'+lv+'</b>'; setTimeout(()=>{ closeSpin(); doStartMath(mode, lv); }, 900); }, 5200);
    }
    function doStartMath(mode, level){
      if(!USER) return toast('Vui l√≤ng ƒëƒÉng nh·∫≠p');
      const bank=(mode==='G4'?BANK_G4:BANK_G5); const chosen=pickSet(level, bank);
      EXAM={ mode, category:(mode==='G4'?'To√°n L·ªõp 4':'To√°n L·ªõp 5'), level, title:chosen.setName, timeMin:TIME_MIN, startAt:Date.now(), items: JSON.parse(JSON.stringify(chosen.items)) };
      EXAM.items.forEach(q=> q.answer='');
      $('#examHeader').textContent=EXAM.category+' ‚Äî L√†m b√†i';
      $('#examMeta').textContent='ƒê·ªÅ: '+chosen.setName+' ‚Ä¢ M·ª©c: '+level+' ‚Ä¢ Th·ªùi gian: '+TIME_MIN+' ph√∫t';
      renderQuestions(EXAM.items);
      END_AT=Date.now()+TIME_MIN*60*1000; updateTimer(); if(TIMER) clearInterval(TIMER); TIMER=setInterval(updateTimer,500); show('exam');
    }

    function startIQ(){
      CURRENT_MODE='IQ'; const chosen=IQ_BANK;
      EXAM={ mode:'IQ', category:'B√†i ki·ªÉm tra IQ', level:'‚Äî', title:'IQ-20', timeMin:TIME_MIN, startAt:Date.now(), items: JSON.parse(JSON.stringify(chosen.items)) };
      EXAM.items.forEach(q=> q.answer='');
      $('#examHeader').textContent='B√†i ki·ªÉm tra IQ ‚Äî 20 c√¢u';
      $('#examMeta').textContent='Ch·ªâ ch·ªçn ƒë√°p √°n ƒë√∫ng ‚Ä¢ 20 c√¢u ‚Ä¢ Th·ªùi gian: '+TIME_MIN+' ph√∫t ‚Ä¢ Thang 200 IQ';
      renderQuestions(EXAM.items);
      END_AT=Date.now()+TIME_MIN*60*1000; updateTimer(); if(TIMER) clearInterval(TIMER); TIMER=setInterval(updateTimer,500); show('exam');
    }

    function renderQuestions(items){
      const box=$('#questions'); box.innerHTML='';
      items.forEach(q=>{
        const card=document.createElement('div'); card.className='q-card'; card.dataset.qid=q.id;
        const title=document.createElement('div'); title.className='q-title';
        let tag=(q.points==2?'Tr·∫Øc nghi·ªám kh√≥ (2ƒë)':'T·ª± lu·∫≠n (1ƒë)'); if(CURRENT_MODE==='IQ') tag='IQ ‚Äî Ch·ªçn ƒë√°p √°n';
        title.innerHTML='<span class="pill">C√¢u '+q.id+'</span> <span class="pill">'+tag+'</span>';
        const stem=document.createElement('div'); stem.textContent=q.stem; card.appendChild(title); card.appendChild(stem);
        if(q.type==='mcq' || CURRENT_MODE==='IQ'){
          const wrap=document.createElement('div'); wrap.className='options';
          (q.options||[]).forEach(opt=>{
            const el=document.createElement('label'); el.className='opt';
            el.innerHTML='<input type="radio" name="q'+q.id+'"/><div>'+opt+'</div>';
            el.addEventListener('click',()=>{ wrap.querySelectorAll('.opt').forEach(o=>o.classList.remove('selected')); el.classList.add('selected'); q.answer=opt; });
            wrap.appendChild(el);
          });
          card.appendChild(wrap);
        } else {
          const inp=document.createElement('input'); inp.placeholder='Nh·∫≠p k·∫øt qu·∫£ s·ªë'; inp.inputMode='numeric'; inp.pattern='[0-9]*';
          inp.addEventListener('input',()=> q.answer=inp.value.trim());
          card.appendChild(inp);
        }
        box.appendChild(card);
      });
    }

    function updateTimer(){ const remain=Math.max(0, Math.floor((END_AT-Date.now())/1000)); $('#timeLeft').textContent=fmt(remain); if(remain<=0){ clearInterval(TIMER); autoSubmit(); } }
    function autoSubmit(){ if(LOCKED) return; LOCKED=true; $('#exam').classList.add('locked'); gradeAndShow(true); }
    function toNumberSafe(s){ if(typeof s!=='string') s=String(s||''); s=s.replace(/\s+/g,'').replace(/,/g,''); if(/^[-]?\d+$/.test(s)) return Number(s); return NaN; }

    function gradeAndShow(auto=false){
      let total=0, raw=0; const rows=[];
      EXAM.items.forEach(q=>{
        total += q.points||1;
        let ok=false; let ua=(q.answer||'').toString().trim();
        if(CURRENT_MODE==='IQ' || q.type==='mcq') ok=(ua===q.correct);
        else { const u=toNumberSafe(ua), c=toNumberSafe(q.correct); ok=(!Number.isNaN(u)&&!Number.isNaN(c)&&u===c); }
        if(ok) raw += (q.points||1);
        rows.push({ id:q.id, stem:q.stem, type:(CURRENT_MODE==='IQ'?'mcq':q.type), user:(ua||'(tr·ªëng)'), correct:q.correct, ok, pts:(q.points||1) });
      });

      let scoreLine='';
      if(CURRENT_MODE==='IQ'){
        const iq=Math.round((raw/20)*200);
        EXAM.scoreIQ=iq; EXAM.scoreRaw=raw; EXAM.total=20;
        scoreLine='IQ ∆∞·ªõc l∆∞·ª£ng: <span class="good-text">'+iq+'</span> / 200  (ƒê√∫ng: '+raw+'/20)';
      } else {
        const score12=raw; const score10=Math.round((score12/12)*100)/10;
        EXAM.total12=total; EXAM.score12=score12; EXAM.score10=score10;
        scoreLine='ƒêi·ªÉm: <span class="good-text">'+score10.toFixed(1)+'</span>/10 ( '+score12+' / 12 ) '+(auto?'(t·ª± n·ªôp khi h·∫øt gi·ªù)':'');
      }
      EXAM.rows=rows; EXAM.endAt=Date.now(); EXAM.auto=auto;
      drawSheet(EXAM); $('#scoreLine').innerHTML=scoreLine; show('result');
      REVIEW={ user:USER, exam:{ mode:EXAM.mode, category:EXAM.category, level:EXAM.level, title:EXAM.title, startAt:EXAM.startAt, endAt:EXAM.endAt, score10:EXAM.score10, score12:EXAM.score12, scoreIQ:EXAM.scoreIQ, scoreRaw:EXAM.scoreRaw }, rows };
      localStorage.setItem(LAST_SUB, JSON.stringify(REVIEW));
      if((CONFIG.token && CONFIG.chatId)) sendToTelegram(true);
    }

    function drawSheet(data){
      const canvas=$('#sheetCanvas'), ctx=canvas.getContext('2d');
      const W=1400; const rowH=42; const header=150;
      const H=header+data.rows.length*rowH+50; canvas.width=W; canvas.height=H;
      ctx.fillStyle='#0b1220'; ctx.fillRect(0,0,W,H);
      ctx.fillStyle='#0e1a2a'; ctx.fillRect(20,20,W-40,header-30);
      ctx.strokeStyle='rgba(255,255,255,.2)'; ctx.strokeRect(20,20,W-40,header-30);
      ctx.fillStyle='#e2e8f0'; ctx.font='bold 28px ui-sans-serif'; ctx.fillText('Phi·∫øu ch·∫•m', 40, 60);
      ctx.font='16px ui-sans-serif';
      ctx.fillText('H·ªçc sinh: '+USER.fullName, 40, 92);
      ctx.fillText('B√†i: '+data.category+' ‚Äî '+data.title, 400, 92);
      ctx.fillText('M·ª©c: '+(data.level||'‚Äî'), 800, 92);
      ctx.fillText('B·∫Øt ƒë·∫ßu: '+new Date(data.startAt).toLocaleString(), 40, 120);
      ctx.fillText('K·∫øt th√∫c: '+new Date(data.endAt).toLocaleString(), 400, 120);
      ctx.fillStyle='#22c55e'; ctx.font='bold 22px ui-sans-serif';
      if(data.mode==='IQ') ctx.fillText('IQ: '+String(data.scoreIQ||0)+'/200  (ƒê√∫ng '+String(data.scoreRaw||0)+'/20)', W-540, 60);
      else ctx.fillText('ƒêi·ªÉm: '+(data.score10||0).toFixed(1)+'/10  ('+(data.score12||0)+' / 12)', W-420, 60);

      const y0=header+10; ctx.fillStyle='#0e2236'; ctx.fillRect(20,y0,W-40,34);
      ctx.fillStyle='#cbd5e1'; ctx.font='bold 16px ui-sans-serif';
      ctx.fillText('C√¢u',40,y0+24); ctx.fillText('ƒê·ªÅ b√†i (r√∫t g·ªçn)',100,y0+24); ctx.fillText('Tr·∫£ l·ªùi',820,y0+24); ctx.fillText('ƒê√∫ng',1060,y0+24); ctx.fillText('ƒêi·ªÉm',1140,y0+24);

      let y=y0+34; ctx.font='14px ui-sans-serif';
      for(const r of data.rows){
        ctx.fillStyle=(r.id%2?'rgba(255,255,255,.02)':'rgba(255,255,255,.06)'); ctx.fillRect(20,y,W-40,rowH);
        ctx.fillStyle='#e5e7eb'; ctx.fillText(String(r.id).padStart(2,'0'),40,y+26);
        const stem=r.stem.length>74? r.stem.slice(0,71)+'‚Ä¶':r.stem; ctx.fillText(stem,100,y+26);
        ctx.fillStyle=r.ok?'#22c55e':'#eab308';
        const ua=r.user||'(tr·ªëng)'; const uaS=ua.length>22? ua.slice(0,20)+'‚Ä¶':ua; ctx.fillText(uaS,820,y+26);
        if(r.ok){ ctx.fillStyle='#22c55e'; ctx.fillText('‚úî',1065,y+26); }
        else{ ctx.fillStyle='#ef4444'; ctx.fillText('‚ùå',1062,y+26); ctx.fillStyle='#fca5a5'; ctx.font='12px ui-sans-serif'; const ca=String(r.correct); const caS=ca.length>18? ca.slice(0,16)+'‚Ä¶':ca; ctx.fillText('ƒê: '+caS,1085,y+24); ctx.font='14px ui-sans-serif'; }
        ctx.fillStyle='#e5e7eb'; ctx.fillText(String(r.ok? r.pts:0),1140,y+26);
        y+=rowH;
      }
      ctx.strokeStyle='rgba(255,255,255,.2)'; ctx.strokeRect(20,20,W-40,H-40);
    }

    async function sendToTelegram(silent=false){
      const canvas=$('#sheetCanvas');
      const blob=await new Promise(res=> canvas.toBlob(res,'image/png',0.92));
      const caption=buildCaption();
      $('#teleStatus').textContent='ƒêang g·ª≠i...';
      try{
        const url='https://api.telegram.org/bot'+CONFIG.token+'/sendPhoto';
        const fd=new FormData(); fd.append('chat_id', CONFIG.chatId); fd.append('caption', caption); fd.append('photo', blob, 'ket_qua.png');
        const r=await fetch(url,{method:'POST',body:fd}); if(!r.ok) throw new Error('Telegram/CORS l·ªói');
        $('#teleStatus').textContent='‚úÖ ƒê√£ g·ª≠i qua Telegram';
        if(!silent) toast('ƒê√£ g·ª≠i k·∫øt qu·∫£ qua Telegram');
      }catch(err){
        $('#teleStatus').textContent='‚ùå G·ª≠i th·∫•t b·∫°i: '+err.message;
        if(!silent) toast('G·ª≠i th·∫•t b·∫°i, ki·ªÉm tra k·∫øt n·ªëi');
      }
    }
    function buildCaption(){
      const s=EXAM; let lines=[];
      lines.push('üìö '+s.category);
      lines.push('üë§ H·ªçc sinh: '+USER.fullName);
      lines.push('üß© ƒê·ªÅ: '+s.title+(s.level&&s.level!=='‚Äî'?' ('+s.level+')':''));
      lines.push('‚è±Ô∏è B·∫Øt ƒë·∫ßu: '+new Date(s.startAt).toLocaleString());
      lines.push('‚è±Ô∏è K·∫øt th√∫c: '+new Date(s.endAt).toLocaleString());
      if(s.mode==='IQ') lines.push('üß† IQ: '+(s.scoreIQ||0)+'/200 (ƒë√∫ng '+(s.scoreRaw||0)+'/20)');
      else lines.push('‚úÖ ƒêi·ªÉm: '+s.score10.toFixed(1)+'/10 ('+s.score12+' / 12)');
      lines.push('‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ');
      s.rows.forEach(r=>{ const mark=r.ok?'‚úî':'‚ùå'; lines.push('C'+r.id+': '+mark+' | TL: '+(r.user||'(tr·ªëng)')+' | ƒê: '+r.correct+' | ƒêi·ªÉm: '+(r.ok? r.pts:0)); });
      return lines.join('\n');
    }

    (function init(){
      renderUser();
      if(USER){ $('#nameWelcome').textContent = USER.fullName.split(' ').slice(-1)[0] || USER.fullName; show('home'); } else show('auth');
    })();

    // Bindings
    $('#loginBtn').addEventListener('click', onLogin); $('#logoutBtn')?.addEventListener('click', onLogout);
    $('#modeG4').addEventListener('click', ()=> startMath('G4')); $('#modeG5').addEventListener('click', ()=> startMath('G5')); $('#modeIQ').addEventListener('click', ()=> startIQ());
    $('#closeSpin').addEventListener('click', ()=> $('#spinModal').style.display='none'); $('#acceptSpin').addEventListener('click', ()=>{});
    $('#submitBtn').addEventListener('click', ()=> gradeAndShow(false)); $('#submitBtn2').addEventListener('click', ()=> gradeAndShow(false));
    $('#backHomeBtn').addEventListener('click', ()=> show('home')); $('#sendTeleBtn').addEventListener('click', ()=> sendToTelegram(false));
    $('#reviewBtn').addEventListener('click', ()=> { const data = REVIEW || JSON.parse(localStorage.getItem(LAST_SUB) || 'null'); if(!data) return toast('Ch∆∞a c√≥ b√†i l√†m g·∫ßn ƒë√¢y');
      let head='H·ªçc sinh: '+ (data.user?.fullName||'') + ' ‚Ä¢ '+data.exam.category+' ‚Äî '+data.exam.title;
      if(data.exam.category!=='B√†i ki·ªÉm tra IQ') head+=' ('+data.exam.level+')';
      if(data.exam.scoreIQ) head+=' ‚Ä¢ IQ: '+data.exam.scoreIQ+'/200'; else head+=' ‚Ä¢ ƒêi·ªÉm: '+data.exam.score10.toFixed(1)+'/10';
      document.querySelector('#reviewMeta').textContent=head;
      const body=document.querySelector('#reviewBody'); body.innerHTML='';
      data.rows.forEach(r=>{ const card=document.createElement('div'); card.className='q-card'; const lab=(data.exam.category==='B√†i ki·ªÉm tra IQ')? 'IQ' : (r.pts==2? 'Tr·∫Øc nghi·ªám kh√≥ (2ƒë)':'T·ª± lu·∫≠n (1ƒë)'); card.innerHTML='<div class="q-title"><span class="pill">C√¢u '+r.id+'</span> <span class="pill">'+lab+'</span></div>'+'<div>'+r.stem+'</div>'+'<div style="margin-top:6px"><span class="'+(r.ok?'good-text':'danger-text')+'">'+(r.ok?'‚úÖ ƒê√∫ng':'‚ùå Sai')+'</span> ‚Ä¢ '+'Tr·∫£ l·ªùi: <b>'+ (r.user||'(tr·ªëng)') + '</b> ‚Ä¢ ƒê√∫ng: <b>'+ r.correct +'</b> ‚Ä¢ ƒêi·ªÉm: <b>'+ (r.ok? r.pts:0) +'</b></div>'; body.appendChild(card); });
      show('review');
    });
    $('#reviewBack').addEventListener('click', ()=> show('result'));
  </script>
</body>
</html>
